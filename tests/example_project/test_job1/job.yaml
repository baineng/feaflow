name: test_job1
engine: default_spark

scheduler:
  schedule_interval: '0 6 * * *'
  depends_on: test_job2
  start_date: 20190430
  catch_up: true
  retries: 1

sources:
  - type: query
    alias: daily_events
    sql: >-
      SELECT id, title, published
      FROM events

computes:
  - type: sql
    sql: >-
      SELECT title, count(*) as amount
      FROM daily_events
      GROUP BY title

sinks:
  - type: table
    name: feaflow_table_sink_test
    mode: overwrite
    cols: title, amount
    format: orc